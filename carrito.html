<!DOCTYPE html>
<html lang="es" style="padding-top: 60px;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWENS SPORTS - Hacer Pedido</title>
    <link href="bootstrap.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="vue3.js"></script>
    <!-- Agrega estos meta tags para mejor apariencia -->
    <meta name="theme-color" content="#FF9900">
    <meta name="msapplication-navbutton-color" content="#FF9900">
    <meta name="apple-mobile-web-app-status-bar-style" content="#FF9900">

    <!-- Iconos de Bootstrap (opcional) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        /* Estilos para asegurar que el navbar esté siempre encima */
        body {
            padding-top: 60px !important;
        }
        .navbar-custom {
            z-index: 9999 !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
        }
        /* Asegurar que el contenido no se oculte detrás del navbar */
        .container.mt-5.pt-5 {
            position: relative;
            z-index: 1;
        }
        /* Asegurar que el sticky-top no se superponga al navbar */
        .sticky-top {
            top: 80px !important;
            z-index: 100 !important;
        }
    </style>
</head>
<body>
    <div id="app-carrito">
       <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top" style="z-index: 9999;">
    <div class="container">
        <a class="navbar-brand" href="index.html">
            <span>AWENS</span> SPORTS
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">
                        <i class="bi bi-house-door me-1"></i> Inicio
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="catalogo.html">
                        <i class="bi bi-grid me-1"></i> Catálogo
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="carrito.html">
                        <i class="bi bi-cart3 me-1"></i> Hacer Pedido
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="seguimiento.html">
                        <i class="bi bi-truck me-1"></i> Seguimiento
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

        <div class="container mt-5 pt-5">
            <section id="carrito" class="seccion">
                <h2 class="titulo-seccion">{{ modoEdicion ? 'Editar Pedido' : 'Realizar Pedido' }}</h2>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card shadow-sm mb-4">
                            <div class="card-body">
                                <h4 class="card-title mb-4">Configura tu pedido</h4>
                                
                                <!-- Selección de Gama -->
                                <div class="mb-4">
                                    <h5>Selecciona la gama del uniforme</h5>
                                    <div class="row">
                                        <div class="col-md-4" v-for="(gama, index) in gamas" :key="index">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" :id="'gama'+index" v-model="pedido.gama" :value="gama.nombre">
                                                <label class="form-check-label" :for="'gama'+index">
                                                    {{ gama.nombre }} - ${{ gama.precio }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Selección de Tipo -->
                                <div class="mb-4">
                                    <h5>Tipo de uniforme</h5>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="adulto" v-model="pedido.tipo" value="adulto" @change="inicializarTallas">
                                                <label class="form-check-label" for="adulto">
                                                    Para Adulto
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="infantil" v-model="pedido.tipo" value="infantil" @change="inicializarTallas">
                                                <label class="form-check-label" for="infantil">
                                                    Para Infantil
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Selección de Tallas y Cantidades -->
                                <div class="mb-4" v-if="pedido.tipo">
                                    <h5>Selecciona las tallas y cantidades</h5>
                                    <p class="text-muted mb-3">Selecciona cuántos uniformes necesitas de cada talla:</p>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3" v-for="talla in tallasDisponibles" :key="talla">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h6 class="card-title text-center">{{ talla }}</h6>
                                                    <div class="d-flex justify-content-center align-items-center">
                                                        <button class="btn btn-outline-secondary btn-sm" 
                                                                @click="disminuirCantidad(talla)"
                                                                :disabled="pedido.tallas[talla] <= 0">
                                                            -
                                                        </button>
                                                        <span class="mx-3 fw-bold fs-5">{{ pedido.tallas[talla] || 0 }}</span>
                                                        <button class="btn btn-outline-secondary btn-sm" 
                                                                @click="aumentarCantidad(talla)"
                                                                :disabled="pedido.tallas[talla] >= 50">
                                                            +
                                                        </button>
                                                    </div>
                                                    <div class="text-center mt-2">
                                                        <small class="text-muted">Subtotal: ${{ (precioGamaSeleccionada * (pedido.tallas[talla] || 0)).toFixed(2) }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-3 p-3 bg-light rounded">
                                        <strong>Total de uniformes: {{ calcularTotalUniformes }}</strong>
                                    </div>
                                </div>

                                <!-- Datos del Cliente -->
                                <div class="mb-4">
                                    <h5>Datos del cliente</h5>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="nombre" class="form-label">Nombre completo</label>
                                            <input type="text" class="form-control" id="nombre" v-model="pedido.datosCliente.nombre" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="telefono" class="form-label">Teléfono</label>
                                            <input type="tel" class="form-control" id="telefono" v-model="pedido.datosCliente.telefono" required>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label for="email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="email" v-model="pedido.datosCliente.email" required>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label for="direccion" class="form-label">Dirección de entrega</label>
                                            <textarea class="form-control" id="direccion" rows="2" v-model="pedido.datosCliente.direccion" required></textarea>
                                        </div>
                                    </div>
                                </div>

                                <!-- Datos del Equipo -->
                                <div class="mb-4">
                                    <h5>Datos del equipo</h5>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="nombreEquipo" class="form-label">Nombre del equipo</label>
                                            <input type="text" class="form-control" id="nombreEquipo" v-model="pedido.datosEquipo.nombre" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="categoria" class="form-label">Categoría</label>
                                            <input type="text" class="form-control" id="categoria" v-model="pedido.datosEquipo.categoria" required>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label for="colores" class="form-label">Colores del equipo (separados por coma)</label>
                                            <input type="text" class="form-control" id="colores" v-model="pedido.datosEquipo.colores" required>
                                        </div>
                                    </div>
                                </div>

                                <!-- Idea para el uniforme -->
                                <div class="mb-4">
                                    <h5>Idea para el uniforme</h5>
                                    <div class="mb-3">
                                        <label for="ideaUniforme" class="form-label">Describe tu idea para el diseño del uniforme</label>
                                        <textarea class="form-control" id="ideaUniforme" rows="4" v-model="pedido.ideaUniforme" required></textarea>
                                    </div>
                                    <div class="form-text">
                                        Incluye detalles como estilo preferido, elementos gráficos, logos, etc.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Resumen del Pedido -->
                    <div class="col-lg-4">
                        <div class="sticky-top" style="top: 80px; z-index: 100;">
                            <div class="card shadow-sm">
                                <div class="card-body">
                                    <h4 class="mb-4">Resumen del Pedido</h4>
                                    
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Gama seleccionada:</span>
                                        <span>{{ pedido.gama || 'No seleccionada' }}</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Tipo:</span>
                                        <span>{{ pedido.tipo || 'No seleccionado' }}</span>
                                    </div>
                                    
                                    <!-- Detalle de tallas seleccionadas -->
                                    <div v-if="calcularTotalUniformes > 0" class="mb-3">
                                        <strong>Detalle de tallas:</strong>
                                        <div v-for="(cantidad, talla) in pedido.tallas" :key="talla" class="d-flex justify-content-between">
                                            <span v-if="cantidad > 0" class="small">
                                                {{ talla }}: {{ cantidad }} unid.
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Total uniformes:</span>
                                        <span>{{ calcularTotalUniformes }}</span>
                                    </div>
                                    
                                    <hr>
                                    
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Subtotal:</span>
                                        <span>${{ calcularSubtotal.toFixed(2) }}</span>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Envío:</span>
                                        <span>${{ calcularEnvio.toFixed(2) }}</span>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between mb-3 fw-bold fs-5">
                                        <span>Total:</span>
                                        <span>${{ calcularTotal.toFixed(2) }}</span>
                                    </div>
                                    
                                    <button class="btn btn-principal w-100 mt-3" @click="realizarPedido" :disabled="!formularioValido">
                                        {{ modoEdicion ? 'Actualizar Pedido' : 'Realizar Pedido' }}
                                    </button>
                                    
                                    <div v-if="modoEdicion" class="mt-2 text-center">
                                        <small class="text-muted">Al actualizar, mantendrás el mismo código de seguimiento</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <footer class="bg-dark text-white py-4 mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h5>AWENS SPORTS</h5>
                        <p>Especialistas en uniformes deportivos de alta calidad.</p>
                    </div>
                    <div class="col-md-3">
                        <h5>Contacto</h5>
                        <ul class="list-unstyled">
                            <li>Email: info@awenssports.com</li>
                            <li>Teléfono: +1 234 567 890</li>
                            <li>Dirección: Calle Deportiva 123</li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h5>Enlaces</h5>
                        <ul class="list-unstyled">
                            <li><a href="index.html" class="text-white">Inicio</a></li>
                            <li><a href="catalogo.html" class="text-white">Catálogo</a></li>
                            <li><a href="carrito.html" class="text-white">Hacer Pedido</a></li>
                            <li><a href="seguimiento.html" class="text-white">Seguimiento</a></li>
                        </ul>
                    </div>
                </div>
                <div class="text-center mt-3">
                    <p>&copy; 2023 AWENS SPORTS. Todos los derechos reservados.</p>
                </div>
            </div>
        </footer>
    </div>
    <script src="bootstrap.js"></script>
    <script src="Script.js"></script>
</body>
</html>
